#! /usr/bin/env node
'use strict';
const gitInfo  = require('./index');
const userArgs = process.argv.slice(2);

const supportedCommands = [
  '`author` - last author of the repo',
  '`authors` - list of all the authors',
  '`authorDate` - date of last commit',
  '`authorDateRelative` - date of last commit',
  '`name` - name of the repository',
  '`repository` - address of the repo',
  '`branch` - current branch',
  '`branches` - all the branches in the repo',
  '`subject` - the message of the last commit'
];
function result(err, response){
  if (err) {
    console.error(err);
  } else {
    console.log(response);
  }
}

if (userArgs[0]) {
  if (userArgs[0] == '--help' || userArgs[0] == '-h' ) {
    var commands = '';
    supportedCommands.map(function (value){
      commands += ' - ' + value + '\n';
    });
    console.log('giti [command]\nList of commands:\n' + commands);
  } else {
    gitInfo(userArgs, result);
  }
} else {
  gitInfo(result);
}
